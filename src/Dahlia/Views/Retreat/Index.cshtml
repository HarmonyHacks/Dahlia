@model Dahlia.ViewModels.RetreatListViewModel

@{
    ViewBag.Title = "App";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<script type="text/javascript">
    $(function() {
        $('#static_tabs').tabs();
    });
</script>

<a href='@Model.CreateLink'>Add a new retreat</a>

<div id="static_tabs" class="ui-tabs ui-widget ui-widget-content ui-corner-all">
    <ul class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
        @foreach (var retreat in Model.Retreats)
        {
            <li class="ui-state-default ui-corner-top"><a href="#@retreat.Id">@retreat.Date.ToShortDateString()</a></li>
        }
    </ul>
    @foreach (var retreat in Model.Retreats)
    {
        <div id="@retreat.Id" class="ui-tabs-panel ui-widget-content ui-corner-bottom @(!retreat.Active ? "ui-tabs-hide" : "")" style="display:inline">
            <a href='@retreat.AddParticipantLink'>Add Participant</a><br />
            <ul><b>Has Bed Code</b>
                @foreach (var participant in retreat.RegisteredParticipants.Where(p => !String.IsNullOrWhiteSpace(p.BedCode)))
                {
                    <li><div style="width:100%"> @participant.FirstName @participant.LastName @participant.BedCode @participant.DateReceived.ToShortDateString() <a href="@participant.DeleteLink">Delete</a> </div>
                        <div style="width:100%"> @participant.Notes </div></li>
                }
            </ul>
            <ul><b>Does Not Have Bed Code</b>
                @foreach (var participant in retreat.RegisteredParticipants.Where(p => String.IsNullOrWhiteSpace(p.BedCode)).OrderBy(p => p.DateReceived))
                {
                    <li><div style="width:100%"> @participant.FirstName @participant.LastName @participant.BedCode @participant.DateReceived.ToShortDateString() <a href="@participant.DeleteLink">Delete</a> </div>
                        <div style="width:100%"> @participant.Notes </div></li>
                }
            </ul>
        </div>
    }
</div>



<div style="width:500px;border-top:1px solid black;">&emsp;</div>